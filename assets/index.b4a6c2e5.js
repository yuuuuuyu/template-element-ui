import{n as e}from"./index.533ed093.js";import"./ui.1d6f8af4.js";const t=e({name:"input-number",model:{prop:"value",event:"change"},props:{value:{type:[String,Number],required:!1,default:""},min:{type:Number,required:!1,default:-1/0},max:{type:Number,required:!1,default:1/0},precision:{type:Number,required:!1,default:0},round:{type:Boolean,required:!1,default:!1},zeroFill:{type:Boolean,required:!1,default:!1},placeholder:{type:String,required:!1,default:"请输入"},disabled:{type:Boolean,required:!1,default:!1},size:{type:String,required:!1,default:""},readonly:{type:Boolean,required:!1,default:!1}},data:()=>({myValue:null}),watch:{value:{handler(e){let t=e;isNaN(parseFloat(t))||(t<this.min&&""!==this.myValue&&(t=this.min),t>this.max&&(t=this.max)),this.myValue=t},immediate:!0},myValue:{handler(){this.$emit("change",this.myValue)},immediate:!0}},methods:{fillZero(e){if(null==e||""===e)return null;const t=this.precision;if(e.split&&this.zeroFill&&t>0){const l=e.indexOf(".");let i;-1===l?(i=t,e+="."):i=t-(e.length-1-l);for(let t=0;t<i;t++)e+="0"}return e},handleChange(){let e=this.myValue;e<this.min&&""!==this.myValue&&(e=this.min),e>this.max&&(e=this.max),this.myValue=this.retainDecimal(e,this.precision),this.zeroFill&&this.precision>0&&this.$nextTick((()=>{this.myValue=this.fillZero(this.myValue)}))},handleInput(e){if(null==e)return null;this.myValue=e.toString().trim().replace(/[^\d.-]/g,"").replace(/\./,"$#$").replace(/\./g,"").replace("$#$",".").replace(/^-/,"$#$").replace(/-/g,"").replace("$#$","-")},retainDecimal(e,t){if(t<0&&(t=0),e.split&&e.indexOf(".")===e.length-1&&t>0)return e;if(e.split&&e.indexOf("-")===e.length-1)return e;if(isNaN(parseFloat(e)))return null;let l;return l=this.round?Math.round(Math.round(parseFloat(e)*Math.pow(10,t)))/Math.pow(10,t):Math.floor(Math.round(parseFloat(e)*Math.pow(10,t)))/Math.pow(10,t),l=l.toString(),l}}},(function(){var e=this,t=e._self._c;return t("el-input",{attrs:{value:e.myValue,placeholder:e.placeholder,disabled:e.disabled,size:e.size,readonly:e.readonly},on:{input:e.handleInput,change:function(t){return e.handleChange(t,!0)}}},[t("template",{slot:"prepend"},[e._t("prepend")],2),t("template",{slot:"append"},[e._t("append")],2)],2)}),[],!1,null,"38dc9343",null,null).exports;export{t as default};
