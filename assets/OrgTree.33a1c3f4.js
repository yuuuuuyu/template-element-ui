import{l as e}from"./org.1c8bd0fa.js";import{n as t}from"./index.af0f36c9.js";import"./ui.1d6f8af4.js";const l=t({props:{value:{type:Array,required:!1,default:()=>[]},picker:{type:Boolean,required:!1,default:!1},multiple:{type:Boolean,required:!1,default:!1}},data:()=>({loading:!1,tableData:[],selection:[]}),watch:{value:{handler(){this.tableData=this.value},deep:!0},selection:{handler(){this.picker&&this.$emit("pick",this.selection)},deep:!0}},methods:{handleSelectionChange(e){e.length>1&&!this.multiple?e.forEach(((t,l)=>{this.$refs.table.toggleRowSelection(t,l===e.length-1)})):this.selection=e},load(e,t,l){this.fetchData(e?{pid:e.id}:null).then((e=>{l(e.data)}))},fetchData(t){return this.loading=!0,e(t).then((e=>(this.loading=!1,e))).catch((()=>{this.loading=!1}))}},created(){this.value.length?this.tableData=this.value:this.fetchData().then((e=>{this.tableData=e.data}))}},(function(){var e=this,t=e._self._c;return t("el-table",{ref:"table",attrs:{height:"100%","row-key":"id",lazy:"",data:e.tableData,load:e.load},on:{"selection-change":e.handleSelectionChange}},[e.picker?t("el-table-column",{attrs:{type:"selection",width:"45"}}):e._e(),t("el-table-column",{attrs:{prop:"name",label:"名称"}}),t("el-table-column",{attrs:{prop:"fullName",label:"全称"}}),t("el-table-column",{attrs:{label:"创建时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.$filter.date(t.row.createTime)))]}}])}),e.picker?e._e():t("el-table-column",{attrs:{label:"操作",width:"260"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._t("action",null,{row:t.row})]}}],null,!0)})],1)}),[],!1,null,"070dc35e",null,null).exports;export{l as default};
